import{q as o,r,d as c,j as e,Y as m}from"./app-BsI9bp-a.js";import{A as p}from"./AuthenticatedLayout-DDz7L5mc.js";import"./ApplicationLogo-DvESflsa.js";import"./transition-BrhwJT9c.js";function j(){const{auth:d}=o().props,[s,i]=r.useState([]),[x,l]=r.useState("");r.useEffect(()=>{c.get("/api/tokens").then(t=>{i(t.data)})},[]);const n=t=>{c.post(`/oauth/tokens/revoke/${t}`,{_method:"POST",_token:d.csrf_token}).then(()=>{l("授权已撤销"),i(s.filter(a=>a.id!==t))}).catch(a=>{console.error("撤销授权时出错:",a)})};return e.jsxs(p,{user:d.user,header:e.jsx("h2",{className:"font-semibold text-2xl text-gray-800",children:"授权管理"}),children:[e.jsx(m,{title:"授权管理"}),e.jsx("div",{className:"max-w-7xl mx-auto py-10 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white overflow-hidden shadow-xl sm:rounded-lg",children:[e.jsx("div",{className:"px-6 py-4 bg-gray-100 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"已授权的应用"})}),e.jsxs("div",{className:"px-6 py-4",children:[x&&e.jsx("div",{className:"mb-4 p-4 bg-green-100 text-green-800 rounded",children:x}),s.length===0?e.jsx("p",{className:"text-gray-600",children:"您还没有授权任何应用。"}):e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-500 uppercase tracking-wider",children:"应用名称"}),e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-500 uppercase tracking-wider",children:"最后使用时间"}),e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-500 uppercase tracking-wider",children:"操作"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-700",children:t.client.name}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-700",children:t.last_used_at?t.last_used_at:"从未使用"}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:e.jsx("button",{onClick:()=>n(t.id),className:"px-3 py-1 bg-red-600 text-white text-xs font-medium rounded hover:bg-red-700",children:"撤销授权"})})]},t.id))})]})]})]})})]})}export{j as default};
